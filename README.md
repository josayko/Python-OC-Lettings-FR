# Epic Events CRM

## Installation

### Prerequisites

- `python >= 3.9`, `pip`, `venv`
- you can manage different `python` versions with **[pyenv](https://github.com/pyenv/pyenv)**
- `docker`

### Get started

#### Local development environment

```bash
$ python -m venv env
```

```bash
$ source env/bin/activate
```

```bash
$  pip install -r requirements.txt
```

#### Environement variables

- Generate a `.env.TEMPLATE` file

```
$ python setup_env.py
```

- Rename the file to `.env` and configure the variables:
  - DJANGO_SECRET_KEY
    - Random string, automatically generated by `setup_env.py` script
  - DEBUG
    - `true` or `false`
  - SENTRY_DSN
    - Create a new project on [sentry.io](https://sentry.io)
  - HEROKU_API_KEY and HEROKU_APP_NAME
    - Create a new app on [heroku.com](https://heroku.com)

#### Setting up database

- Migrate database

```bash
$ python manage.py migrate
```

- Populate some data in the database

```bash
$ make fixture
# alternatively:
# $ python manage.py loaddata users addresses lettings profiles
```

## Running the app

```bash
$ python manage.py runserver
```

> The API is running on http://localhost:8000/ by default

> You can access admin dashboard on http://localhost:8000/admin, if data has been loaded previously from `fixture/`, there is a default admin user `admin` with password `Abc1234!`

- Execute linting

```bash
$ flake8
```

- Execute unit tests

```bash
$ pytest
```

## Docker image

#### Build and run a docker image locally

- An image of the app will be build from `Dockerfile`

```bash
$ docker build -t [IMAGE_NAME] .
```

- Start a container from the image

```bash
$ docker run --rm -p 8000:8000 --env-file .env [IMAGE_NAME]
```

#### Pull and run the image from Docker Hub

- Sign in to Docker Hub

```bash
$ docker pull josayko/oc-lettings:latest
```

```bash
$ docker run --rm -p 8000:8000 --env-file .env josayko/oc-lettings:latest
```

## Author

- Jonny Saykosy <josayko@pm.me>

## License & copyright

Â© Jonny Saykosy

Licensed under the [MIT License](LICENSE).
